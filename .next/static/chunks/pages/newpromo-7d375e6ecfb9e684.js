(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[31],{9545:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/newpromo",function(){return t(8022)}])},8022:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return N}});var n=t(5893),a=t(7294),r=t(2460),i=t.n(r);function l(e){let{Lable:o,Type:t,Placeholder:a,required:r,dispatch:l,value:s}=e,c=e=>{"Discount"===o?l({type:"VALUE",payload:e.target.value}):"Discount (in Rs)"===o?(l({type:"DISCOUNT_OFF",payload:e.target.value}),l({type:"VALUE",payload:""})):l({type:"ABOVE_RS",payload:e.target.value})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:i().inputTags,children:[(0,n.jsx)("label",{className:i().InputLable,htmlFor:o,children:o+":"}),(0,n.jsx)("input",{required:r,id:o,className:"text"===t?i().CustomerInputText:i().CustomInputNumber,type:t,placeholder:a,onChange:c})]})})}var s=t(5331),c=t.n(s),u=t(6409),d=t.n(u);function p(e){let{Label:o,Name:t,types:a,dispatch:r,State:i}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:d().selectInput,children:[(0,n.jsx)("label",{className:d().label,htmlFor:o+"-select",children:o}),(0,n.jsx)("select",{required:!0,name:t,id:o+"-select",onChange:e=>r("Promotion_category"===t?{type:"Promotion Categories",payload:e.target.value}:{type:"Promotion Type",payload:e.target.value}),className:d().selectType,children:(null==i?void 0:i.promotionCategorie)==="Brand promotion"?(0,n.jsx)("option",{className:d().option,value:"",children:"Not Avilable"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("option",{className:d().option,value:"",children:"--Please choose an option--"}),null==a?void 0:a.map((e,o)=>(0,n.jsx)("option",{className:d().option,value:e,children:e},o))]})})]})})}var m=t(843);t(2722),t(9242);var _=t(2167),y=t(1294),v=t(9808);let g=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=(0,y.JU)(v.db,"promoter/".concat(t,"/promotion"),o);try{let o=await (0,y.pl)(n,{...e});console.log(o)}catch(e){console.log(e)}},h=()=>{var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o="";for(let t=0;t<20;t++)o+=e[parseInt(Math.floor(Math.random()*e.length))];return o};var f=t(1649);let P=["Flat Rs_ Off","Flat_ % discount","Rs _ off on purchases above Rs_","days free trial","Custom message","Brand promotion"],b=["One-time valid","unlimited validity"],x={category:"",type:"",value:"",discount_of:"",above_rs:"",validFrom:(0,_.Z)(new Date,"dd/MM/yyyy"),validTo:(0,_.Z)(new Date,"dd/MM/yyyy")};function w(){let[e,o]=(0,a.useState)([new Date,new Date]),t=(0,f.v9)(e=>e.userId.userId),r=(e,o)=>{switch(o.type){case"Promotion Categories":return{...e,category:o.payload};case"Promotion Type":return{...e,type:o.payload};case"VALUE":return{...e,value:o.payload};case"DISCOUNT_OFF":return{...e,discount_of:o.payload};case"ABOVE_RS":return{...e,above_rs:o.payload};case"ValidFrom":return{...e,validFrom:o.payload};case"ValidTo":return{...e,validTo:o.payload};default:return e}},[i,s]=(0,a.useReducer)(r,x);(0,a.useEffect)(()=>{s({type:"ValidFrom",payload:(0,_.Z)(e[0],"dd/MM/yyyy")}),s({type:"ValidTo",payload:(0,_.Z)(e[1],"dd/MM/yyyy")})},[e]);let u=e=>{o(e)},d=e=>{e.preventDefault();let o=new Date,n=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return"".concat(e).padStart(2,o)},a="".concat(n(o.getDate()),"/").concat(n(o.getMonth()+1),"/").concat(o.getFullYear()," ").concat(n(o.getHours()>12?o.getHours()%12:o.getHours()),":").concat(n(o.getMinutes()),":").concat(n(o.getSeconds())," ").concat(n(o.getHours()>12?"pm":"am")),r={category:i.category,type:i.type,validFrom:i.validFrom,validTo:i.validTo,id:h(),message:"",value:"Rs _ off on purchases above Rs_"===i.category?i.discount_of+"*"+i.above_rs:i.value,eventTimeStamp:a,eventTimeStampId:Date.now(),retailers:[],coupons:[]};g(r,r.id,t)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:c().newPromotion,children:[(0,n.jsx)("h1",{className:c().newPromotion_heading,children:"Create new promtion"}),(0,n.jsx)("div",{className:c().newPromotion_body,children:(0,n.jsxs)("form",{onSubmit:d,className:c().promotionForm,children:[(0,n.jsx)(p,{Label:"Promotion Category",Name:"Promotion_category",types:P,dispatch:s,State:""}),(0,n.jsx)(p,{Label:"Promotion Type",Name:"Promotion_type",types:b,dispatch:s,State:i}),(null==i?void 0:i.category)!=="Rs _ off on purchases above Rs_"?(0,n.jsx)(l,{required:!0,Lable:"Discount",Type:"number",Placeholder:(null==i?void 0:i.category)==="Flat Rs_ Off"?"Discount(in Rs)":(null==i?void 0:i.category)==="Flat_ % discount"?"Discount(in %)":"Discount Price",dispatch:s,value:i.value}):(0,n.jsxs)("div",{className:c().discount_off_onn,children:[(0,n.jsx)(l,{required:!0,Lable:"Discount (in Rs)",Type:"number",Placeholder:"discount of (in rs)",dispatch:s,value:i.value}),(0,n.jsx)(l,{required:!0,Lable:"Above (in Rs)",Type:"number",Placeholder:"Above (in rs)",dispatch:s,value:i.value})]}),(0,n.jsxs)("div",{className:c().date_rangePicker,children:[(0,n.jsx)("p",{className:c().validate_picker_label,children:"Validatity"}),(0,n.jsx)(m.Z,{onChange:u,minDate:new Date,format:"dd/MM/yyyy",className:c().daterangePicker,required:!0,clearIcon:null,value:[e[0],e[1]]})]}),(0,n.jsx)("button",{className:c().savePromotion,children:"Save Promotion"})]})})]})})}function N(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(w,{})})}},2460:function(e){e.exports={inputTags:"Input_inputTags__RTbV9",InputLable:"Input_InputLable__SD9Jr",CustomerInputText:"Input_CustomerInputText__l4Fx7",CustomInputNumber:"Input_CustomInputNumber__I_cXl"}},5331:function(e){e.exports={newPromotion:"newPromotion_newPromotion__NcBMW",newPromotion_heading:"newPromotion_newPromotion_heading__7VWCz",newPromotion_body:"newPromotion_newPromotion_body__wmBFY",promotionForm:"newPromotion_promotionForm__9RZB5",discount_off_onn:"newPromotion_discount_off_onn__qfbaA",date_rangePicker:"newPromotion_date_rangePicker__8XoFu",validate_picker_label:"newPromotion_validate_picker_label__zKCGx",daterangePicker:"newPromotion_daterangePicker__KAeQm",savePromotion:"newPromotion_savePromotion__RXnMO"}},6409:function(e){e.exports={selectInput:"selectionInput_selectInput__FKFKz",label:"selectionInput_label__nyzu3",selectType:"selectionInput_selectType__MNAT_",option:"selectionInput_option__6_Tz4"}}},function(e){e.O(0,[25,774,888,179],function(){return e(e.s=9545)}),_N_E=e.O()}]);